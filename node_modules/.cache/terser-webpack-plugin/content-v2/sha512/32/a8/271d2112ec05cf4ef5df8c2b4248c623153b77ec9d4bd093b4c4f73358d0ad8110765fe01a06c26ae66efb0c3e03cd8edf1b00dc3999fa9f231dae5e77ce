{"code":"(this.webpackJsonpphotos=this.webpackJsonpphotos||[]).push([[0],{61:function(e,t,c){},62:function(e,t,c){},83:function(e,t,c){\"use strict\";c.r(t);var n=c(7),r=c(0),o=c.n(r),s=c(8),a=c.n(s),i=(c(60),c(61),c(17)),u=(c(62),c(114)),l=c(115),j=c(29),b=c.n(j);function h(e){return Object(n.jsxs)(\"div\",{children:[Object(n.jsx)(u.a,{label:\"Searched item\",size:\"small\",variant:\"outlined\",value:e.query,onInput:function(t){e.setQuery(t.target.value)}}),Object(n.jsx)(l.a,{variant:\"outlined\",color:\"primary\",onClick:function(){e.setSearchOn((function(e){return!e}))},children:\"SEARCH\"})]})}function d(e){return Object(n.jsx)(\"div\",{children:Object(n.jsxs)(\"div\",{className:\"card\",children:[Object(n.jsx)(\"img\",{className:\"card-img-top\",src:e.photo.cover_photo.urls.regular,alt:\"Card pic\"}),Object(n.jsx)(\"div\",{className:\"card-body\",children:Object(n.jsx)(\"h5\",{className:\"card-title\",children:e.photo.cover_photo.alt_description||e.photo.title})})]})})}function O(e){var t=e.photos,c=e.hasMore,o=e.setPageNumber,s=Object(r.useRef)(),a=Object(r.useCallback)((function(e){s.current&&s.current.disconnect(),s.current=new IntersectionObserver((function(e){e[0].isIntersecting&&c&&(console.log(\"visible\"),o((function(e){return e+1})))})),e&&s.current.observe(e)}),[c]),i=t.filter((function(e){return e.cover_photo}));return Object(n.jsx)(\"div\",{className:\"card-columns\",children:i.map((function(e,t){return e.cover_photo?t===i.length-1?Object(n.jsx)(\"div\",{ref:a,children:Object(n.jsx)(d,{photo:e})},t):Object(n.jsx)(\"div\",{children:Object(n.jsx)(d,{photo:e})},t):null}))})}var p=c(35);var f=function(){var e=Object(r.useState)(\"\"),t=Object(i.a)(e,2),c=t[0],o=t[1],s=Object(r.useState)(1),a=Object(i.a)(s,2),u=a[0],l=a[1],j=Object(r.useState)(!1),d=Object(i.a)(j,2),f=d[0],v=d[1],m=function(e,t,c){var n=Object(r.useState)([]),o=Object(i.a)(n,2),s=o[0],a=o[1],u=Object(r.useState)(!1),l=Object(i.a)(u,2),j=l[0],h=l[1];return Object(r.useEffect)((function(){a([])}),[e]),Object(r.useEffect)((function(){b.a.get(\"https://api.unsplash.com/search/collections/?client_id=j9bQjfT_YyUFBte48Ewb8Q58-tYlHNiThtbzHJ8Y6oE&query=\".concat(e,\"&page=\").concat(t)).then((function(e){console.log(e.data.results),a([].concat(Object(p.a)(s),Object(p.a)(e.data.results))),h(e.data.total_pages>t)})).catch((function(e){console.log(e)}))}),[t,c]),[s,j]}(c,u,f),x=Object(i.a)(m,2),g=x[0],S=x[1];return Object(n.jsxs)(\"div\",{className:\"App\",children:[Object(n.jsx)(h,{query:c,setQuery:o,setSearchOn:v}),Object(n.jsx)(O,{photos:g,hasMore:S,setPageNumber:l})]})};a.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(f,{})}),document.getElementById(\"root\"))}},[[83,1,2]]]);","name":"static/js/main.d1e97572.chunk.js","map":{"version":3,"sources":["static/js/main.d1e97572.chunk.js"],"names":["this","push","61","module","exports","__webpack_require__","62","83","__webpack_exports__","r","jsx_runtime","react","react_default","n","react_dom","react_dom_default","slicedToArray","TextField","Button","axios","axios_default","Search","props","Object","children","label","size","variant","value","query","onInput","e","setQuery","target","color","onClick","setSearchOn","prevSearchOn","EachPhoto","className","src","photo","cover_photo","urls","regular","alt","alt_description","title","Results","photos","hasMore","setPageNumber","observer","lastPhotoElementRef","node","current","disconnect","IntersectionObserver","entries","isIntersecting","console","log","prevPageNumber","observe","filteredPhotos","filter","item","map","index","length","ref","toConsumableArray","src_App","_useState","_useState2","_useState3","_useState4","pageNumber","_useState5","_useState6","searchOn","_usePhotoSearch","setPhotos","setHasMore","a","get","concat","then","res","data","results","total_pages","catch","err","usePhotoSearch","_usePhotoSearch2","render","StrictMode","document","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpphotos\"] = this[\"webpackJsonpphotos\"] || []).push([[0],{\n\n/***/ 61:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 62:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 83:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(7);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(8);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./node_modules/bootstrap/dist/css/bootstrap.css\nvar bootstrap = __webpack_require__(60);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(61);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(17);\n\n// EXTERNAL MODULE: ./src/App.css\nvar App = __webpack_require__(62);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/TextField/TextField.js + 45 modules\nvar TextField = __webpack_require__(114);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Button/Button.js + 6 modules\nvar Button = __webpack_require__(115);\n\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(29);\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// CONCATENATED MODULE: ./src/components/Search.jsx\nfunction Search(props){// const [input, setInput] = useState(\"\");\nvar getValue=function getValue(e){props.setQuery(e.target.value);};var fetchPhotos=function fetchPhotos(input){axios_default.a.get(\"https://api.unsplash.com/search/collections/?client_id=j9bQjfT_YyUFBte48Ewb8Q58-tYlHNiThtbzHJ8Y6oE&query=\".concat(input)).then(function(res){console.log(res.data.results);props.setPhotos(res.data.results);}).catch(function(err){console.log(err);});};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextField[\"a\" /* default */],{label:\"Searched item\",size:\"small\",variant:\"outlined\",value:props.query//dont use parentesis\n,onInput:getValue}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{variant:\"outlined\",color:\"primary\",onClick:function onClick(){//in this way we just change the previous value to the opposite value, \nprops.setSearchOn(function(prevSearchOn){return!prevSearchOn;});//this second approach is also possible, but I should import also the searchOn variable. \n// props.setSearchOn(!searchOn);\n},children:\"SEARCH\"})]});}\n// CONCATENATED MODULE: ./src/components/EachPhoto.jsx\nfunction EachPhoto(props){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"card\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"card-img-top\",src:props.photo.cover_photo.urls.regular,alt:\"Card pic\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"card-body\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h5\",{className:\"card-title\",children:props.photo.cover_photo.alt_description||props.photo.title})})]})});}\n// CONCATENATED MODULE: ./src/components/Results.jsx\nfunction Results(props){var photos=props.photos,hasMore=props.hasMore,setPageNumber=props.setPageNumber;//when we rerender the component, everything change, but by using useRef(). This function return one object with property \"current\" with the value of null\nvar observer=Object(react[\"useRef\"])();//the function inside callback function will happen just when the variable inside of [] changes. Really similar to useEffect BUT IS CONNECT WITH SOME VARIABLE AND STORED INSIDE OF IT.\n//node refers to the <div> which was returned element\nvar lastPhotoElementRef=Object(react[\"useCallback\"])(function(node){if(observer.current){observer.current.disconnect();}observer.current=new IntersectionObserver(function(entries){if(entries[0].isIntersecting&&hasMore){console.log(\"visible\");setPageNumber(function(prevPageNumber){return prevPageNumber+1;});}});if(node){observer.current.observe(node);}},[hasMore]);var filteredPhotos=photos.filter(function(item){return item.cover_photo;});return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"card-columns\",children:filteredPhotos.map(function(item,index){if(item.cover_photo){if(index===filteredPhotos.length-1){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{ref:lastPhotoElementRef,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(EachPhoto,{photo:item})},index);}else{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(EachPhoto,{photo:item})},index);}}return null;})});}\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules\nvar toConsumableArray = __webpack_require__(35);\n\n// CONCATENATED MODULE: ./src/components/usePhotoSearch.jsx\n//when we create a Hook, it usually starts with \"use\"\n//we don't read anything in Hook\nfunction usePhotoSearch(query,pageNumber,searchOn){var _useState=Object(react[\"useState\"])([]),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),photos=_useState2[0],setPhotos=_useState2[1];var _useState3=Object(react[\"useState\"])(false),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),hasMore=_useState4[0],setHasMore=_useState4[1];//this useEffect function will reset the photos and delete the last search and start another one, otherwise it would add the phots from new search after the ones from the last research\nObject(react[\"useEffect\"])(function(){setPhotos([]);},[query]);//useEffect is used to run a function just when a condition is attended\nObject(react[\"useEffect\"])(function(){axios_default.a.get(\"https://api.unsplash.com/search/collections/?client_id=j9bQjfT_YyUFBte48Ewb8Q58-tYlHNiThtbzHJ8Y6oE&query=\".concat(query,\"&page=\").concat(pageNumber)).then(function(res){console.log(res.data.results);setPhotos([].concat(Object(toConsumableArray[\"a\" /* default */])(photos),Object(toConsumableArray[\"a\" /* default */])(res.data.results)));//if the condition inside of parentheses is true, it will change the value of hasMore to true\nsetHasMore(res.data.total_pages>pageNumber);}).catch(function(err){console.log(err);});//ehen the variable inde [] changes -> the function below will run\n},[pageNumber,searchOn]);return[photos,hasMore];}\n// CONCATENATED MODULE: ./src/App.js\nfunction App_App(){var _useState=Object(react[\"useState\"])(\"\"),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useState3=Object(react[\"useState\"])(1),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),pageNumber=_useState4[0],setPageNumber=_useState4[1];var _useState5=Object(react[\"useState\"])(false),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),searchOn=_useState6[0],setSearchOn=_useState6[1];var _usePhotoSearch=usePhotoSearch(query,pageNumber,searchOn),_usePhotoSearch2=Object(slicedToArray[\"a\" /* default */])(_usePhotoSearch,2),photos=_usePhotoSearch2[0],hasMore=_usePhotoSearch2[1];return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"App\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Search,{query:query,setQuery:setQuery,setSearchOn:setSearchOn}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Results,{photos:photos,hasMore:hasMore,setPageNumber:setPageNumber})]});}/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById(\"root\"));// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\n/***/ })\n\n},[[83,1,2]]]);","inputSourceMap":{"version":3,"sources":["/home/dci/Documents/React/PicPhotos/photos/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/dci/Documents/React/PicPhotos/photos/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/dci/Documents/React/PicPhotos/photos/node_modules/postcss-loader/src/index.js??postcss!/home/dci/Documents/React/PicPhotos/photos/src/index.css","/home/dci/Documents/React/PicPhotos/photos/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/dci/Documents/React/PicPhotos/photos/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/dci/Documents/React/PicPhotos/photos/node_modules/postcss-loader/src/index.js??postcss!/home/dci/Documents/React/PicPhotos/photos/src/App.css","/home/dci/Documents/React/PicPhotos/photos/src/components/Search.jsx","/home/dci/Documents/React/PicPhotos/photos/src/components/EachPhoto.jsx","/home/dci/Documents/React/PicPhotos/photos/src/components/Results.jsx","/home/dci/Documents/React/PicPhotos/photos/src/components/usePhotoSearch.jsx","/home/dci/Documents/React/PicPhotos/photos/src/App.js","/home/dci/Documents/React/PicPhotos/photos/src/index.js"],"names":["Search","props","getValue","e","setQuery","target","value","fetchPhotos","input","axios","get","then","res","console","log","data","results","setPhotos","catch","err","query","setSearchOn","prevSearchOn","EachPhoto","photo","cover_photo","urls","regular","alt_description","title","Results","photos","hasMore","setPageNumber","observer","useRef","lastPhotoElementRef","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","prevPageNumber","observe","filteredPhotos","filter","item","map","index","length","usePhotoSearch","pageNumber","searchOn","useState","setHasMore","useEffect","total_pages","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","import React from \"react\";\nimport { useState } from \"react\";\nimport { Button, TextField } from \"@material-ui/core\";\nimport axios from \"axios\";\n\nexport default function Search(props) {\n  // const [input, setInput] = useState(\"\");\n  const getValue = (e) => {\n    props.setQuery(e.target.value);\n  };\n\n  const fetchPhotos = (input) => {\n    axios\n      .get(\n        `https://api.unsplash.com/search/collections/?client_id=j9bQjfT_YyUFBte48Ewb8Q58-tYlHNiThtbzHJ8Y6oE&query=${input}`\n      )\n      .then((res) => {\n        console.log(res.data.results);\n        props.setPhotos(res.data.results);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n  return (\n    <div>\n      <TextField\n        label=\"Searched item\"\n        size=\"small\"\n        variant=\"outlined\"\n        value={props.query}\n        //dont use parentesis\n        onInput={getValue}\n      />\n      <Button variant=\"outlined\" color=\"primary\" onClick={()=>{\n        //in this way we just change the previous value to the opposite value, \n        props.setSearchOn((prevSearchOn)=> !prevSearchOn);\n        //this second approach is also possible, but I should import also the searchOn variable. \n        // props.setSearchOn(!searchOn);\n      }}>\n        SEARCH\n      </Button>\n    </div>\n  );\n}\n","import React from \"react\";\n\n\nexport default function EachPhoto(props) {\n  return (\n    <div>\n      <div className=\"card\" >\n        <img className=\"card-img-top\" src={props.photo.cover_photo.urls.regular} alt=\"Card pic\" />\n        <div className=\"card-body\">\n          <h5 className=\"card-title\">{props.photo.cover_photo.alt_description || props.photo.title}</h5>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useRef, useCallback } from \"react\";\nimport EachPhoto from \"./EachPhoto\";\n\nexport default function Results(props) {\n  const { photos, hasMore, setPageNumber } = props;\n  //when we rerender the component, everything change, but by using useRef(). This function return one object with property \"current\" with the value of null\n  const observer = useRef();\n\n  //the function inside callback function will happen just when the variable inside of [] changes. Really similar to useEffect BUT IS CONNECT WITH SOME VARIABLE AND STORED INSIDE OF IT.\n  //node refers to the <div> which was returned element\n  const lastPhotoElementRef = useCallback(\n    (node) => {\n      if (observer.current) {\n        observer.current.disconnect();\n      }\n      observer.current = new IntersectionObserver((entries) => {\n        if (entries[0].isIntersecting && hasMore) {\n          console.log(\"visible\");\n          setPageNumber((prevPageNumber)=>prevPageNumber+1)\n        }\n      });\n      if (node) {\n        observer.current.observe(node);\n      }\n    },\n    [hasMore]\n  );\n\n  let filteredPhotos = photos.filter((item)=> item.cover_photo);\n\n  return (\n    <div className=\"card-columns\">\n      {filteredPhotos.map((item, index) => {\n        if (item.cover_photo) {\n          if (index === filteredPhotos.length - 1) {\n            return (\n              <div ref={lastPhotoElementRef} key={index}>\n                <EachPhoto photo={item} />\n              </div>\n            );\n          } else {\n            return (\n              <div  key={index}>\n                <EachPhoto photo={item} />\n              </div>\n            );\n          }\n        }\n        return null;\n      })}\n    </div>\n  );\n}\n","//when we create a Hook, it usually starts with \"use\"\n//we don't read anything in Hook\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nexport default function usePhotoSearch(query, pageNumber, searchOn) {\n  const [photos, setPhotos] = useState([]);\n  const [hasMore, setHasMore] = useState(false);\n\n  //this useEffect function will reset the photos and delete the last search and start another one, otherwise it would add the phots from new search after the ones from the last research\n\n  useEffect(() => {\n    setPhotos([]);\n  }, [query]);\n  //useEffect is used to run a function just when a condition is attended\n  useEffect(() => {\n    axios\n      .get(\n        `https://api.unsplash.com/search/collections/?client_id=j9bQjfT_YyUFBte48Ewb8Q58-tYlHNiThtbzHJ8Y6oE&query=${query}&page=${pageNumber}`\n      )\n      .then((res) => {\n        console.log(res.data.results);\n        setPhotos([...photos, ...res.data.results]);\n        //if the condition inside of parentheses is true, it will change the value of hasMore to true\n        setHasMore(res.data.total_pages > pageNumber)\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n    //ehen the variable inde [] changes -> the function below will run\n  }, [pageNumber, searchOn]);\n\n  return [photos, hasMore];\n}\n","import \"./App.css\";\nimport Search from \"./components/Search\";\nimport { useState } from \"react\";\nimport Results from \"./components/Results\";\nimport usePhotoSearch from \"./components/usePhotoSearch\";\n\nfunction App() {\n  const [query, setQuery] = useState(\"\");\n  const [pageNumber, setPageNumber] = useState(1);\n  const [searchOn, setSearchOn] = useState(false);\n\n  const [photos, hasMore] = usePhotoSearch(query, pageNumber, searchOn);\n  return (\n    <div className=\"App\">\n      <Search query={query} setQuery={setQuery} setSearchOn={setSearchOn} />\n      <Results \n      photos={photos} \n      hasMore={hasMore} \n      setPageNumber={setPageNumber} />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"../node_modules/bootstrap/dist/css/bootstrap.css\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"]}}